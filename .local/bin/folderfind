#!/bin/bash

# Run fzfmenu.sh to get the selected directory
selected_dir=$(fd --type directory --hidden . ~ | ~/.local/bin/fzfmenu "Select a directory")
[ -z "$selected_dir" ] && exit 1

# Get the action to perform
index=$(
  printf "1 Terminal Tmux\n2 Dolphin" |
    ~/.local/bin/fzfmenu "Choose an action" |
    awk '{ print $1 }'
)
[ -z "$index" ] && exit 2

# Perform the action
case $index in
1) foot --working-directory "$selected_dir" -e sh -c "tmux -u new-session" ;;
2) dolphin "$selected_dir" ;;
esac
