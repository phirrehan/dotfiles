#!/bin/bash

# Variables
scriptDir="$HOME/.local/bin"
touchpad='synaptics-tm3276-022'
status=$(cat $HOME/.cache/.touchpadStatus.txt 2>/dev/null)

# Functions
function EnableTouchpad() {
  hyprctl keyword "device[$touchpad]:enabled" true
  printf "true" >$HOME/.cache/.touchpadStatus.txt
}

function DisableTouchpad() {
  hyprctl keyword "device[$touchpad]:enabled" false
  printf "false" >$HOME/.cache/.touchpadStatus.txt
}

function Toast() {
  caelestia shell toaster info "Touchpad" "$1" "$2"
}

function Notify() {
  case "$1" in
  "enable") Toast "Touchpad Enabled" "touchpad_mouse" ;;
  "disable") Toast "Touchpad Disabled" "touchpad_mouse_off" ;;
  "fallback") Toast "Status not found. Fallback to enabling touchpad" "touchpad_mouse" ;;
  esac
}

# If the following function executes, run the script again to work properly
Default() {
  printf "true" >$HOME/.cache/.touchpadStatus.txt
  EnableTouchpad
  Notify fallback
}

# Start
case $status in
"true") DisableTouchpad && Notify disable ;;
"false") EnableTouchpad && Notify enable ;;
*) Default && exit 1 ;;
esac
