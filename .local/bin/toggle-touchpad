#!/bin/bash

# Variables
scriptDir="$HOME/.local/bin"
touchpad='synaptics-tm3276-022'
status=$(cat $HOME/.cache/.touchpadStatus.txt 2>/dev/null)

# Functions
EnableTouchpad() {
  hyprctl keyword "device[$touchpad]:enabled" true
  printf "true" >$HOME/.cache/.touchpadStatus.txt
}

DisableTouchpad() {
  hyprctl keyword "device[$touchpad]:enabled" false
  printf "false" >$HOME/.cache/.touchpadStatus.txt
}

Notify() {
  notify-send "Touchpad" "$1" -a "touchpad script"
}

# If the following function executes, run the script again to toggle correctly
Default() {
  printf "true" >$HOME/.cache/.touchpadStatus.txt
  EnableTouchpad
  Notify "Status not found. Fallback to default behaviour"
}

# Start
[ ! -f "$HOME/.cache/.touchpadStatus.txt" ] && Default && exit 1

case $status in
"true") DisableTouchpad && Notify "Successfully Disabled" ;;
"false") EnableTouchpad && Notify "Successfully Enabled" ;;
*) Default && exit 2 ;;
esac
